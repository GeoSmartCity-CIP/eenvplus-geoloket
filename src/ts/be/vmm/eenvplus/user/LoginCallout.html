<a ng-if="!ctrl.loggedIn" href class="dropdown-toggle" data-toggle="dropdown">
    Login<span class="caret"></span>
</a>

<div class="dropdown-menu" role="menu"
     ng-click="$event.stopImmediatePropagation()">

    <div class="dropdown-caret right">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <form>
        <div class="form-group username-group">
            <label for="usernameInput">
                Username
            </label>
            <input id="usernameInput" name="username" autofocus
                   type="text" class="form-control"
                   ng-model="ctrl.username"/>
        </div>

        <div class="form-group password-group">
            <label for="passwordInput">
                Password
            </label>
            <input id="passwordInput" name="password"
                   type="password" class="form-control"
                   ng-model="ctrl.password"/>
        </div>

        <div ng-if="ctrl.error" class="alert alert-danger">
            <strong>Login failed!</strong>
            <span ng-if="ctrl.error === 'invalid_grant'">Username or password is incorrect.</span>
            <span ng-if="ctrl.error !== 'invalid_grant'">Unexpected error.</span>
        </div>

        <div class="actions">
            <button class="btn btn-primary"
                    ng-click="ctrl.submit()">
                Log in
            </button>

            <label>
                <input type="checkbox"
                       ng-model="ctrl.storeCredentials"
                       ng-click="ctrl.toggleStorage()">
                Remember me
            </label>
        </div>

        <div class="password-link">
            <a href="" ng-click="ctrl.toggleStorage()">Forgot password?</a>
        </div>
    </form>
</div>
